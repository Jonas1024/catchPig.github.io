System.register("chunks:///_virtual/CubeEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./LogicDefine.ts","./Entity.ts","./GameTypeDefine.ts"],(function(t){var e,a,i,n,s,o,r,c,d,h,l,u,p,b,f,m,v,y,S,R,_,g,E,M,C,A,x,D,w,T,k,B;return{setters:[function(t){e=t.inheritsLoose,a=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,n=t.Vec3,s=t.MeshRenderer},function(t){o=t.Vector3,r=t.AABB,c=t.ccclass,d=t._logic,h=t._timer,l=t._gameType,u=t.NodeHelper,p=t.Maths,b=t._platform,f=t.EPlatformType,m=t._audio,v=t.EEntityState,y=t._ui,S=t.Vector2,R=t.Move},function(t){_=t.EBattleDirType,g=t.EBattleSizeType,E=t.CCubeSize,M=t.CCubeSizeAddV3,C=t.CBattleDirAngle,A=t.CSceneData,x=t.EEntityType,D=t.CBattleDirXYZ,w=t.CBattleDirV3,T=t.CCubeColliderDis},function(t){k=t.Entity},function(t){B=t.EGameType}],execute:function(){var O;i._RF.push({},"09673ji52dMwZbXo4Dx/ozy","CubeEntity",void 0);var P=new o(0,90,0),U=new o(0,0,0),N=new o(0,0,0),z=new o(0,0,0),L=new o(1,1,1),I=new o(0,0,0),V=new r,Z=new n;t("CubeEntity",c("CubeEntity")(O=function(t){function i(){for(var e,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))||this).entityType=x.Cube,e.isPut=!0,e.isUpdateStateMackine=!0,e.isDestroy=!1,e.index=-1,e.delayShow=-1,e.isAnim=!1,e.data=null,e._move=new R,e.isScaleAnim=!1,e.isRotateAnim=!1,e.toRotate=new o,e.meshRenders=null,e.scaleRatio=0,e}e(i,t);var n=i.prototype;return n.isMoving=function(){return!1},n.onStateEnterLoad=function(){t.prototype.onStateEnterLoad.call(this),this.data=d.data.datas[this.index],this.meshRenders=this.getComponentsInChildren(s),this.setScaleNum(0,!1),this._move.init(this.node,!1,10),h.deleteDirtyMark("BattleCubeEntity"+this.index)},n.onStateEnterRun=function(){var e=this;if(t.prototype.onStateEnterRun.call(this),this.isRotateAnim=!1,this.scene.updateCubeSkin(this.data,this.meshRenders),l.type==B.shape)for(var i,n=-1,s=a(this.meshRenders);!(i=s()).done;){var r=i.value;n++;var c=d._shape.data.curColors[this.index],h=d._shape.data.matMap[c];n==_.down||n==_.up?r.setMaterial(h.color,0):r.setMaterial(h.img,0)}u.setRotate(this.node.children[0],o.ZERO,!1),this.data.type==g["2*2"]&&(this.data.aabb.halfExtents.y!=E.y+M.y||this.data.dir!=_.back&&this.data.dir!=_.front||u.setRotate(this.node.children[0],P,!1)),this.isScaleAnim=!1,this.setRotate(C[this.data.dir],!1),this.isAnim?(this.scaleRatio=p.minToMax(.03,.06,!1),this.setScaleNum(.3,!1),d.getDirMul(I,this.data.dir,8,!0),I.addSelf(this.data.aabb.center),this.setPosition(I,!1),this._move.setRunData(1,(function(t){t.target.set(e.data.aabb.center),t.speed=20})),this.scheduleOnce((function(){e._move.run(),e.isScaleAnim=!0}),this.delayShow)):(this.setScaleNum(1,!1),this.setPosition(this.data.aabb.center,!1))},n.onStateUpdateRun=function(){t.prototype.onStateUpdateRun.call(this),this._move.onUpdate(),this.isScaleAnim&&o.equals(this.data.aabb.center,this.getPosition(!1),.8)&&this.lerpScaleTarget(L,this.scaleRatio,!1)&&(this.setScaleNum(1,!1),this.isScaleAnim=!1),this.isRotateAnim&&u.lerpRotateTarget(this.node,this.toRotate,.1,!1)&&(this.isRotateAnim=!1)},n.onStateUpdateOver=function(){t.prototype.onStateUpdateOver.call(this),this._move.onUpdate()},n.onStateEnterOver=function(){var e=this;t.prototype.onStateEnterOver.call(this,!1),b.type!=f.oppo&&b._vibrate_.short(),m.play(A.audio.remove),d.data.count()<=1&&(l.isRun=!1),d.data.remove(this.index),this._move.setRunData(1,(function(t){d.getDirMul(t.target,e.data.dir,20),t.target.addSelf(e.data.aabb.center),t.speedMul=3})),this._move.run((function(){e.scene.entityMgr.remove(e)}))},n.onStateEnterExit=function(e){this._move.clear(),t.prototype.onStateEnterExit.call(this),l.isRun||1==this.scene.entityMgr.entitesType.get(x.Cube).size&&d.data.hasZero()&&l._runComplete.run(!0)},n.dis=function(t){V.set(this.data.aabb.center,this.data.aabb.halfExtents),V.halfExtents.subSelf(M),U.set(r.ptPointAabb(V,t.data.aabb.center)),V.set(t.data.aabb.center,t.data.aabb.halfExtents),V.halfExtents.subSelf(M),N.set(r.ptPointAabb(V,this.data.aabb.center));var e=D[this.data.dir].cur,a=Math.abs(U[e]-N[e]);return a},n.colliderAnim=function(t,e,a){var i=this;this._move.setRunData(2,(function(n,s){if(n.target.set(i.data.aabb.center),0==s){var o=D[t.data.dir].cur;n.target[o]+=w[t.data.dir][o]*a,n.speedMul=e}else n.speedMul=1.5})),this._move.run()},n.dirBack=function(){this.toRotate.set(C[this.data.dir]),this.isRotateAnim=!0},n.randomRemove=function(){this.entityStateMackine.change(v.Over)},n.click=function(t){var e=this;if(void 0===t&&(t=!1),this.scene.isIndexShow)d.dirBack(this.index);else if(l.type==B.level&&(d.data.count()<=1&&d._level.step.cur<=1&&(l.isRun=!1),d._level.step.sub(1)),t)this.entityStateMackine.change(v.Over);else{var a=d.getFront(this.index);if(a){b.type!=f.oppo&&(b._vibrate_.short(),this.scheduleOnce((function(){b._vibrate_.short()}),.1));var i=this.dis(a.entity);0==i&&this.scene.colliderAnim(this.index),this._move.setRunData(2,(function(t,a){if(t.target.set(e.data.aabb.center),0==a){var n=D[e.data.dir].cur;t.target[n]+=w[e.data.dir][n]*T,i>0&&(d.getDirMul(z,e.data.dir,i),t.target[n]+=z[n],t.onEnd=function(){e.scene.colliderAnim(e.index)}),t.speedMul=1}else t.speedMul=1.5})),this._move.run((function(){l.isRun||l._runComplete.run(!1)}))}else this.entityStateMackine.change(v.Over)}},n.getUIPosition=function(t,e){void 0===e&&(e=this.data.aabb.center),Z.set(e.x,e.y,e.z),this.scene.cCamera_scene.convertToUINode(Z,y.getZeroWorldPointNode(),Z),S.set(t,Z)},i}(k))||O);i._RF.pop()}}}));

System.register("chunks:///_virtual/CustomCube1x1Entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Entity.ts","./LogicDefine.ts","./Main.ts"],(function(t){var e,n,s,i,a,o,r,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,s=t.MeshRenderer},function(t){i=t.Entity},function(t){a=t.EBattleDirType,o=t.EEntityType},function(t){r=t.ccclass,u=t._logicCustom}],execute:function(){var c;n._RF.push({},"482d2u0rThAIbK0KU6q0OVo","CustomCube1x1Entity",void 0);t("CustomCube1x1Entity",r("CustomCube1x1Entity")(c=function(t){function n(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).entityType=o.CustomCube1x1,e.isPut=!0,e.isUpdateStateMackine=!0,e.isDestroy=!1,e.index=-1,e.data=null,e.meshRenders=null,e}e(n,t);var i=n.prototype;return i.isMoving=function(){return!1},i.onStateEnterLoad=function(){t.prototype.onStateEnterLoad.call(this),this.data=u.data.datas[this.index],this.meshRenders=this.getComponentsInChildren(s)},i.onStateEnterRun=function(){t.prototype.onStateEnterRun.call(this),this.scene.updateCubeSkin(this.data,this.meshRenders),this.setScaleNum(1,!1),this.setPosition(this.data.aabb.center,!1)},i.click=function(t){if(u.data.state){var e=this.scene.rayMeshs(t,this.meshRenders);if(-1!==e){var n=this.meshRenders[e].node.name,s=a[n];u.createCube(this.data,s)}}else u.remove(this.index)},n}(i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomDownEntity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./LogicDefine.ts","./Entity.ts"],(function(t){var n,e,i,s,o,a,r,c,u,h,d;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t.Color,s=t.MeshRenderer},function(t){o=t.Vector3,a=t.AABB,r=t.ccclass,c=t._logicCustom},function(t){u=t.EBattleDirType,h=t.EEntityType},function(t){d=t.Entity}],execute:function(){var l;e._RF.push({},"79fe5FXe/FGQ6DSPeEi1QN1","CustomDownEntity",void 0);new o(0,90,0),new o(0,0,0),new o(0,0,0),new o(0,0,0),new o(1,1,1),new o(0,0,0),new o(0,0,0),new o(0,0,0),new i(255,255,255),new i(180,180,180),new i,new a,t("CustomDownEntity",r("CustomDownEntity")(l=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(n=t.call.apply(t,[this].concat(i))||this).entityType=h.CustomDown,n.isPut=!0,n.isUpdateStateMackine=!0,n.isDestroy=!1,n.index=-1,n.data=null,n.meshRender=null,n.meshDownRender=null,n}n(e,t);var i=e.prototype;return i.isMoving=function(){return!1},i.onStateEnterLoad=function(){t.prototype.onStateEnterLoad.call(this),this.data=c.data.downs[this.index];var n=this.getComponentsInChildren(s);this.meshRender=n[0],this.meshDownRender=n[1]},i.onStateEnterRun=function(){t.prototype.onStateEnterRun.call(this),this.setPosition(this.data.aabb.center,!1)},i.click=function(t){if(c.data.state){var n=this.scene.rayMesh(t,this.meshRender),e=this.scene.rayMesh(t,this.meshDownRender);0==e&&0==n?this.downRay(t):0!=e?0!=n&&n<=e?c.createCube(this.data,u.up):this.downRay(t):n>0&&c.createCube(this.data,u.up)}},i.downRay=function(t){var n=this.scene.rayByData(t,c.data.datas);n&&n.customCube1x1Entity&&n.customCube1x1Entity.click(t)},e}(d))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/CustomEditorSuccessUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./LogicDefine.ts"],(function(t){var e,o,c,n,s,i,r,u,a,l,p,d;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy},function(t){c=t.ccclass,n=t._platform,s=t.EBottomAdType,i=t.EPlatformType,r=t._audio,u=t._logicCustom,a=t.EUILayer,l=t.EBlockOnceAdType,p=t.BaseUI},function(t){d=t.CSceneData}],execute:function(){var f;o._RF.push({},"28b5cESrnVIqJ0tM+E3zJ4T","CustomEditorSuccessUI",void 0);t("CustomEditorSuccessUI",c("CustomEditorSuccessUI")(f=function(t){function o(){for(var e,o=arguments.length,c=new Array(o),n=0;n<o;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))||this).layerType=a.Notice,e.blockOnceAdType=l.Show,e.openByAudioUrls=[d.audio.success],e}e(o,t);var c=o.prototype;return c.onCreate=function(){switch(n.type){case i.wx:this.bottomAdType=s.Native;break;default:this.bottomAdType=s.Banner}},c.onOpen=function(){r.play(this.audioUrls[0])},c.onClickAShare=function(){u.shareMap(u.editorIndex)},c.onClickBack=function(){this.closeUI()},o}(p))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/CustomEditorUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./AnimBaseUI.ts"],(function(t){var e,n,o,a,i,u,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ccclass,a=t.EBottomAdType,i=t.EPlatformType,u=t._main,s=t.EBlockOnceAdType},function(t){c=t.AnimBaseUI}],execute:function(){var l;n._RF.push({},"7acbbIJhu9KYp6myGE7JnKn","CustomEditorUI",void 0);t("CustomEditorUI",o("CustomEditorUI")(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).blockOnceAdType=s.None,e.cLabel_step=null,e.cLabel_title=null,e}e(n,t);var o=n.prototype;return o.onCreate=function(){switch(PlatformMgr.type){case i.WECHAT:this.bottomAdType=a.Native;break;default:this.bottomAdType=a.Banner}this.addEvent(_battleCustom.EventType.MAP_DATA_CHANGE,this.updateStep,this,_battleCustom)},o.onOpen=function(){this.cLabel_title.string="我的地图"+(_battleCustom.editorIndex+1),this.updateStep(),this.updateCubeState()},o.updateStep=function(){this.cLabel_step.string=_battleCustom.getStepSub(_battleCustom.editorIndex)+""},o.onClickPause=function(){UIMgr.open(CUseData.settingUrl)},o.onClickCubeState=function(){_battleCustom.data.state=!_battleCustom.data.state,this.updateCubeState()},o.updateCubeState=function(){this.SwitchSpriteCC.index=_battleCustom.data.state?0:1},o.onClickAddStep=function(){u.showVideo("自定义关卡加步数",(function(){_battleCustom.addMapCubeCount(_battleCustom.editorIndex)}))},o.onClickRun=function(){_battleCustom.run(_battleCustom.getMap(_battleCustom.editorIndex).data,!1)},o.onClickAShare=function(){_battleCustom.shareMap(_battleCustom.editorIndex)},n}(c))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomFriendUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts"],(function(t){var e,n,o,r,a,c,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ccclass,r=t.EBottomAdType,a=t.EPlatformType,c=t.EUILayer,i=t.EBlockOnceAdType,s=t.BaseUI}],execute:function(){var u;n._RF.push({},"70a9bfpdthOf4PAburxNBJx","CustomFriendUI",void 0);t("CustomFriendUI",o("CustomFriendUI")(u=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).layerType=c.ItemUp,e.blockOnceAdType=i.Show,e._openData=null,e}e(n,t);var o=n.prototype;return o.onCreate=function(){switch(PlatformMgr.type){case a.WECHAT:this.bottomAdType=r.Native;break;default:this.bottomAdType=r.Banner}},o.onClickBtn=function(){this.closeUI(),_battleCustom.run(this._openData,!0)},n}(s))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomMapUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts"],(function(t){var e,o,n,a,i,s,u,c,l;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy},function(t){n=t.ccclass,a=t.EBottomAdType,i=t.EPlatformType,s=t._main,u=t.EUILayer,c=t.EBlockOnceAdType,l=t.BaseUI}],execute:function(){var r;o._RF.push({},"46de0GZURlA5qEi9wv3Ip0W","CustomMapUI",void 0);t("CustomMapUI",n("CustomMapUI")(r=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).layerType=u.Panel,e.blockOnceAdType=c.None,e.cLabel_video_count=null,e.cVideoIcon=null,e}e(o,t);var n=o.prototype;return n.onCreate=function(){switch(PlatformMgr.type){case i.WECHAT:this.bottomAdType=a.Native;break;default:this.bottomAdType=a.Banner}this.addEvent(_battleCustom.EventType.MAP_COUNT_CHANGE,this.onOpen,this,_battleCustom),this.SwitchSpriteCC.index=0==CUseUIIndex?0:1},n.onOpen=function(){var t=_battleCustom.getMapCount();this.cLabel_video_count.string=t+"/"+CBattleCustomDefaultMapCount,this.ListCC.render(t,BattleCustomMapUIItem,(function(t,e,o){t.init(o)})),this.cVideoIcon.active=t>=CBattleCustomDefaultMapCount},n.onClickVideo=function(){var t=this,e=function(){t.closeUI(),UIMgr.tip("新建地图成功");var e=_battleCustom.addMap();_battleCustom.editorRun(e)};_battleCustom.getMapCount()>=CBattleCustomDefaultMapCount?s.showVideo("自定义地图",e):e()},n.onClickExit=function(){this.closeUI(),_battle.exit(!0)},o}(l))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/CustomMapUIItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts"],(function(t){var e,n,i,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.ccclass,a=t.Times,c=t.BaseComponent}],execute:function(){var o;n._RF.push({},"aae2bE+tldMYai5S+apkQKc","CustomMapUIItem",void 0);t("CustomMapUIItem",i("CustomMapUIItem")(o=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).cLabel_time=null,e.cLabel_count=null,e.cAShare=null,e.index=-1,e}e(n,t);var i=n.prototype;return i.init=function(t){this.index=t;var e=_battleCustom.getMap(this.index);this.cLabel_count.string=this.index+1+"",this.cLabel_time.string=a.toLocaleString(1e3*e.createTime),0!=_battleCustom.deDataByCreateCount(e.data.p)?this.cAShare.active=!0:this.cAShare.active=!1},i.onClick=function(){_battleCustom.editorRun(this.index)},i.onClickAShare=function(){_battleCustom.shareMap(this.index)},n}(c))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts"],(function(t){var n,e,o,r,a,c,i;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy},function(t){r=t.Vector2,a=t.ccclass,c=t.BaseEntity,i=t._scene}],execute:function(){var u;o._RF.push({},"75163W0lJhEfLqkGm23XbfB","Entity",void 0);new r,t("Entity",a("Entity")(u=function(t){function o(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).entityMgr=null,n}n(o,t);var r=o.prototype;return r.onStateEnterLoad=function(){t.prototype.onStateEnterLoad.call(this)},r.onStateEnterRun=function(){t.prototype.onStateEnterRun.call(this)},r.onStateUpdateRun=function(){t.prototype.onStateUpdateRun.call(this)},r.onStateEnterOver=function(n){t.prototype.onStateEnterOver.call(this,n)},r.onStateEnterExit=function(n){t.prototype.onStateEnterExit.call(this)},e(o,[{key:"scene",get:function(){return i.getCurrent()}}]),o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/EntityMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./LogicDefine.ts"],(function(t){var e,n,i,a,c,o,r,u,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t._logic,a=t.EEntityState,c=t._timer,o=t.BaseEntityMgr},function(t){r=t.CResoucesLoadPriority,u=t.CBattleCustomDownEntityUrl,s=t.CBattleCustomCube1x1EntityUrl}],execute:function(){n._RF.push({},"b4f6bpjJ1FH8qrun6ymykNh","EntityMgr",void 0);t("EntityMgr",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.getQueueResoucesPriority=function(){return r},o.createCube=function(t,e,n){var c=i.getCubeUrl(t),o=this.create(c);return o.index=t,o.isAnim=e,o.delayShow=n,o.entityStateMackine.change(a.Load),this.scene.cContent.addChild(o.node),o.entityStateMackine.change(a.Reset),o.entityStateMackine.change(a.Run),o},o.createPreCube=function(t){var e=this,n=this.create(t,!1);n.setPositionX(-1e7,!1),this.scene.cContent.addChild(n.node),c.callLater(this,(function(){e.pool.put(n.node)}))},o.createCustomDown=function(t){var e=this.create(u);return e.index=t,e.entityStateMackine.change(a.Load),this.scene.cContent.addChild(e.node),e.entityStateMackine.change(a.Reset),e.entityStateMackine.change(a.Run),e},o.createCustomCube1x1=function(t){var e=this.create(s);return e.index=t,e.entityStateMackine.change(a.Load),this.scene.cContent.addChild(e.node),e.entityStateMackine.change(a.Reset),e.entityStateMackine.change(a.Run),e},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/FailUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./GameTypeDefine.ts","./LogicDefine.ts"],(function(e){var t,o,i,n,a,c,s,r,p,l,u,y,d,h,v,f,_,m,T;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){i=e.cclegacy},function(e){n=e.ccclass,a=e._platform,c=e.EBottomAdType,s=e.EPlatformType,r=e._audio,p=e.Times,l=e._gameType,u=e._main,y=e._ui,d=e._language,h=e._logic,v=e.EUILayer,f=e.EBlockOnceAdType,_=e.BaseUI},function(e){m=e.EGameType},function(e){T=e.CSceneData}],execute:function(){var g;i._RF.push({},"3815cHFX8JDg6qF/h8A5rt6","FailUI",void 0);var C=["sffh","test2222"];e("FailUI",n("FailUI")(g=function(e){function i(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).layerType=v.Notice,t.blockOnceAdType=f.None,t.cSpriteLoaderCC_tip=null,t.cNativeHight=null,t.cBtns=null,t.openByAudioUrls=[T.audio.fail],t.openTime=-1,t}t(i,e);var n=i.prototype;return n.onCreate=function(){switch(a.type){case s.vivo:this.bottomAdType=c.Native;break;case s.oppo:a.isLongScreen?this.bottomAdType=c.Banner:this.bottomAdType=c.None;break;case s.wx:this.bottomAdType=c.Native;break;default:this.bottomAdType=c.Banner}},n.onOpen=function(){switch(a.type==s.oppo&&a._nativeTemp_.showRoot(),r.play(this.audioUrls[0]),this.openTime=p.second(),l.type){case m.today:this.cSpriteLoaderCC_tip.setSpriteFrameUrl("scene/texture/end/"+C[0]),this.toDayMaxRecode.node.active=!0;break;default:this.cSpriteLoaderCC_tip.setSpriteFrameUrl("scene/texture/end/"+C[1]),this.toDayMaxRecode.node.active=!1}a.type!=s.overseas_kwai&&a.type!=s.wx||a._interstitial_.show()},n.onClickIndex=function(){l.hasRun()&&(this.closeUI(),l.exit(),a.type==s.oppo&&a._nativeTemp_.hideRoot())},n.onClickReset=function(){l.hasRun()&&(this.closeUI(),l.reset(),a.type==s.oppo&&a._nativeTemp_.hideRoot())},n.onClickRevive=function(){var e=this;u.showVideo("复活",(function(){y.tip(d.get(40001)),e.closeUI(),l.type==m.level?h._level.revive():h._today.revive(p.second()-e.openTime)}))},o(i,[{key:"toDayMaxRecode",get:function(){return this.getCacheComponent("ToDayMaxRecode")}}]),i}(_))||g);i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelSelectUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./LevelSelectUIItems.ts"],(function(t){var e,n,o,i,l,s,c,a,u,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ccclass,i=t.LevelHelper,l=t._gameType,s=t.EUILayer,c=t.EBottomAdType,a=t.EBlockOnceAdType,u=t.BaseUI},function(t){h=t.LevelSelectUIItems}],execute:function(){var r;n._RF.push({},"0c28faGIHhEDLuOn/ZtyhTp","LevelSelectUI",void 0);t("LevelSelectUI",o("LevelSelectUI")(r=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).layerType=s.Panel,e.bottomAdType=c.None,e.blockOnceAdType=a.None,e.allCount=-1,e.colCount=-1,e.endCount=-1,e._openData=null,e}e(n,t);var o=n.prototype;return o.onCreate=function(){var t=this;this.addEvent(i.EventType.CHNAGE,this.updateView,this,(function(){return t._openData.level})),this.ListRollCC.itemDataRender=function(e,n,o){n.getComponent(h).init(4*e,e==t.colCount-1?t.endCount:4,t)},this.ListRollCC.setPositionX(-1e5,!1),this.scheduleOnce((function(){t.ListRollCC.setPositionX(0,!1)}),.1)},o.onOpen=function(){var t=this,e=this._openData.level.cur;this.allCount=Math.max(this._openData.add?e+1e3:e,this._openData.configLength),this.colCount=Math.ceil(this.allCount/4),this.endCount=this.allCount%4,this.ListRollCC.setItemDatas(this.colCount),this.scheduleOnceCover((function(){t.ListRollCC.showIndex(Math.floor(e/4),-300)}))},o.updateView=function(){this.onOpen(),this.ListRollCC.updateItemDatas()},o.onClickExit=function(){this.closeUI(),l.exit()},n}(u))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelSelectUIItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./GameTypeDefine.ts"],(function(e){var t,i,n,l,s,a,c,o,r,p,u;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){n=e.ccclass,l=e._gameType,s=e._main,a=e._platform,c=e.EPlatformType,o=e._ui,r=e._language,p=e.BaseComponent},function(e){u=e.EGameType}],execute:function(){var h;i._RF.push({},"1849fVG/5FPK6XQJzCg2gey","LevelSelectUIItem",void 0);e("LevelSelectUIItem",n("LevelSelectUIItem")(h=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).cLabel_level=null,t.cshipin=null,t.levelId=-1,t.ui=null,t}t(i,e);var n=i.prototype;return n.init=function(e,t){this.levelId=e,this.ui=t,this.cLabel_level.string=this.levelId+"";var i=t._openData.level.cur;this.levelId==i?this.ControllerCC.index=1:this.levelId<i?this.ControllerCC.index=2:this.ControllerCC.index=0,l.hasRun(l.type)&&l.type==u.shape&&this.levelId<i?this.cshipin.active=!0:this.cshipin.active=!1},n.onClick=function(){var e=this;switch(this.ControllerCC.index){case 1:if(l.hasRun(l.type)&&l.run(l.type),a.type==c.tt){var t=window.tt,i="首页";switch(l.type){case u.level:i="关卡";break;case u.today:i="挑战";break;case u.shape:i="彩虹";break;case u.custom:i="自定义";break;case u.customEditor:i="编辑器"}t.reportAnalytics("",{mode:i})}break;case 0:o.tip(r.get(40002));break;case 2:if(l.hasRun(l.type))if(l.type==u.shape)s.showVideo("",(function(){if(l.run(l.type,e.levelId),a.type==c.tt){var t=window.tt;t.reportAnalytics("adFinished",{origin:"模式  彩虹"}),t.reportAnalytics("enterMode",{mode:"彩虹"})}}),!1,(function(){}));else if(l.run(l.type,this.levelId),a.type==c.tt){var n=window.tt;switch(l.type){case u.level:case u.today:case u.custom:case u.customEditor:}n.reportAnalytics("enterMode",{mode:"关卡"})}}},i}(p))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelSelectUIItems.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./LevelSelectUIItem.ts"],(function(e){var t,n,c,i,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){c=e.ccclass,i=e.BaseComponent},function(e){o=e.LevelSelectUIItem}],execute:function(){var s;n._RF.push({},"0bde8k+SgJL6KoPOH3gdDio","LevelSelectUIItems",void 0);e("LevelSelectUIItems",c("LevelSelectUIItems")(s=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.init=function(e,t,n){this.CreatePrefabToEditorCC.render(t,o,(function(t,c,i){t.init(e+i+1,n)}))},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/PropGetUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts"],(function(e){var t,i,o,r,n,a,p,c,u,l,s,d,_,f;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){o=e.ccclass,r=e._platform,n=e.EBottomAdType,a=e.EPlatformType,p=e._config_,c=e._main,u=e._ui,l=e._language,s=e._prop,d=e.EUILayer,_=e.EBlockOnceAdType,f=e.BaseUI}],execute:function(){var h;i._RF.push({},"e1ce3+qYH5HdYyBjqGXiedY","PropGetUI",void 0);e("PropGetUI",o("PropGetUI")(h=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).layerType=d.Notice,t.blockOnceAdType=_.None,t.cSpriteLoaderCC_title=null,t.cSpriteLoaderCC_tip=null,t.cSpriteLoaderCC_icon=null,t._openData=null,t}t(i,e);var o=i.prototype;return o.onCreate=function(){switch(r.type){case a.wx:this.bottomAdType=n.Native;break;default:this.bottomAdType=n.Banner}},o.onOpen=function(){this.updateView()},o.updateView=function(){var e=this._openData.id,t=p.obj.prop[e];this.cSpriteLoaderCC_title.setSpriteFrameUrl(t.ui_img_url[0],!0),this.cSpriteLoaderCC_tip.setSpriteFrameUrl(t.ui_img_url[1],!0),this.cSpriteLoaderCC_icon.setSpriteFrameUrl(t.ui_img_url[2],!0)},o.onClickVideo=function(){var e=this,t=this._openData.id;c.showVideo(t+"道具",(function(){u.tip(l.get(40001)),e.closeUI(),s.addProp(e._openData.id)}),!1,(function(){s.addPropBuyShare(e._openData.id),e.updateView()}))},i}(f))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/ResetCardAnimUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts"],(function(e){var o,t,n,i,a,s,r,l;return{setters:[function(e){o=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){i=e.ccclass,a=e.Move,s=e.EUILayer,r=e.LoadDir,l=e.BaseUI}],execute:function(){var v;n._RF.push({},"1a491bOh8pLhICqAwY5a5Us","ResetCardAnimUI",void 0);var c=function(e){return e[e.delay=0]="delay",e[e.moveUp=1]="moveUp",e[e.moveLeft=2]="moveLeft",e[e.moveDown=3]="moveDown",e[e.moveRight=4]="moveRight",e}(c||{}),m=c.moveUp,h=[[c.moveRight,c.moveUp,c.moveRight,c.moveDown,c.delay,c.delay,c.moveLeft,c.moveUp,c.moveLeft,c.moveDown,c.delay,c.delay],[c.moveLeft,c.moveDown,c.delay,c.delay,c.moveRight,c.moveUp,c.moveRight,c.moveDown,c.delay,c.delay,c.moveLeft,c.moveUp],[c.delay,c.delay,c.moveLeft,c.moveUp,c.moveLeft,c.moveDown,c.delay,c.delay,c.moveRight,c.moveUp,c.moveRight,c.moveDown]],d=.2,u=-104;e("ResetCardAnimUI",i("ResetCardAnimUI")(v=function(e){function n(){for(var o,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(o=e.call.apply(e,[this].concat(n))||this).layerType=s.NoticeUp,o.cAContent=null,o.moves=[],o.loadDir=new r(2,null),o}o(n,e);var i=n.prototype;return i.onCreate=function(){for(var e,o=t(this.cAContent.children);!(e=o()).done;){var n=e.value,i=new a;i.init(n,!1,10),this.moves.push(i)}},i.onOpen=function(){var e=this;this.cAContent.children[0].setPosition(u,0),this.cAContent.children[1].setPosition(0,0),this.cAContent.children[2].setPosition(104,0);var o=0;this.anim(1,m,(function t(){o++,console.log("第"+o+"轮动画"),e.animAll(t)}))},i.onClose=function(){for(var e,o=t(this.moves);!(e=o()).done;){e.value.clear()}this.unscheduleAllCallbacks(),this.loadDir.onFinish=null},i.onUpdate=function(){for(var e,o=t(this.moves);!(e=o()).done;){e.value.onUpdate()}},i.animAll=function(e){var o=this,t=h[0].length,n=-1;!function i(){++n>=t?e():o.animAllOnce(n,i)}()},i.animAllOnce=function(e,o){this.loadDir.count=3,this.loadDir.onFinish=o;for(var t=0;t<h.length;t++)this.anim(t,h[t][e],this.loadDir.subCount())},i.anim=function(e,o,t){if(o!=c.delay){var n=this.moves[e],i=this.cAContent.children[e];n.setRunData(1,(function(e){switch(o){case c.moveDown:e.target.y=0,e.target.x=i.position.x,e.speed=670;break;case c.moveUp:e.target.y=134,e.target.x=i.position.x,e.speed=670;break;case c.moveLeft:e.target.y=i.position.y,e.target.x=i.position.x+u,e.speed=Math.abs(u)/d;break;case c.moveRight:e.target.y=i.position.y,e.target.x=i.position.x+104,e.speed=Math.abs(104)/d}})),n.run(t)}else this.scheduleOnce(t,d)},n}(l))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/RunUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./AnimBaseUI.ts","./GameTypeDefine.ts","./LogicDefine.ts"],(function(e){var t,n,i,o,s,a,c,l,p,u,r,h,v,d,y,_,m,A,f,L,T,E;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy},function(e){o=e.ccclass,s=e.EBlockOnceAdType,a=e._platform,c=e.EBottomAdType,l=e.EPlatformType,p=e.NodeHelper,u=e._gameType,r=e._audio,h=e.PropHelper,v=e._logic,d=e._timer,y=e._language,_=e._ui,m=e.EUIState,A=e.Times,f=e.EUILayer},function(e){L=e.AnimBaseUI},function(e){T=e.EGameType},function(e){E=e.CSceneData}],execute:function(){var C;i._RF.push({},"99a85F3zGRJcIAk1CxG/bAP","RunUI",void 0);e("RunUI",o("RunUI")(C=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).layerType=f.WindowUp,t.cLabel_time=null,t.cLabel_level=null,t.cAtime=null,t.cAstep=null,t.cLabel_step=null,t.cPause=null,t.cBottomBtns=null,t.cAnimtorByTweenCC_tip=null,t.useTipNodes=[],t}t(i,e);var o=i.prototype;return o.onCreate=function(){var t=this;if(e.prototype.onCreate.call(this),this.useTipNodes.push(this.cPause,this.cBottomBtns),this.blockOnceAdType=s.None,a.isLongScreen){switch(a.type){case l.wx:this.bottomAdType=c.Native;break;case l.web:this.bottomAdType=c.None;break;default:this.bottomAdType=c.Banner}p.setPositionY(this.cBottomBtns,a._banner_.worldTopY+5,!1)}else this.bottomAdType=c.None,p.setPositionY(this.cBottomBtns,0,!1);this.addEvent(u.EventType.PLAY_ANIM,(function(){r.play(E.audio.magic),t.cAnimtorByTweenCC_tip.setOpacity(1),t.cAnimtorByTweenCC_tip.play()}),this,u),this.addEvent(h.EventType.CHANGE,this.onEventStepCount,this,v._level.step),this.addEvent(v.EventType.DURATION_CHANGE,this.onLoopDownCount,this,v),this.addEvent(v.EventType.USE_DIRBACK,(function(){for(var e,i=n(t.useTipNodes);!(e=i()).done;){e.value.active=!1}}),this,v),this.addEvent(v.EventType.USE_DIRBACK_COMPLETE,(function(){for(var e,i=n(t.useTipNodes);!(e=i()).done;){e.value.active=!0}}),this,v)},o.onOpen=function(){switch(e.prototype.onOpen.call(this),this.cAnimtorByTweenCC_tip.setOpacity(0),d.clear(this,this.onLoopDownCount),u.type){case T.level:this.cLabel_level.node.active=!0,this.cAtime.active=!1,this.onEventLevel(v._level.curLevel),this.cAstep.active=!0,this.onEventStepCount(),this.playAnim(!0);break;case T.today:this.cLabel_level.node.active=!1,this.cAstep.active=!1,this.cAtime.active=!0,d.loop(this,this.onLoopDownCount,1,-1,-1),0==v._today.configIndex&&this.playAnim(!0);break;case T.shape:this.cLabel_level.node.active=!0,this.cAstep.active=!1,this.cAtime.active=!1,this.onEventLevel(v._shape.curLevel),this.playAnim(!0)}},o.onEventLevel=function(e){this.cLabel_level.string=y.replace(40014,e+"")},o.onEventStepCount=function(){var e=v._level.step.cur;this.cLabel_step.string=e+""},o.onLoopDownCount=function(){var e=_.getModule(E.uiUrl.SettingUI).state;if(e!=m.Open&&e!=m.Load&&(e=_.getModule(E.uiUrl.SuccessUI).state)!=m.Open&&e!=m.Load&&(e=_.getModule(E.uiUrl.FailUI).state)!=m.Open&&e!=m.Load){var t=v._today.intervalTimeCountDown.sub;this.cLabel_time&&(this.cLabel_time.string=A.numHourCountDown(1e3*t))}},i}(L))||C);i._RF.pop()}}}));

System.register("chunks:///_virtual/RunUIItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./LogicDefine.ts"],(function(t){var e,i,n,o,r,s,a,p,c,u,h,l,d,f,y,g,C,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy},function(t){a=t.ccclass,p=t.property,c=t._prop,u=t._ui,h=t._language,l=t._platform,d=t.EPlatformType,f=t._main,y=t._scene,g=t._gameType,C=t.BaseComponent},function(t){I=t.EPropId}],execute:function(){var P,m,v,B,w;s._RF.push({},"dd64aZwIeVNp7299nIjWYPB","RunUIItem",void 0);t("RunUIItem",(P=a("RunUIItem"),m=p({type:I,displayName:"道具id"}),P((w=e((B=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"configID",w,o(e)),e.cAAdd=null,e}i(e,t);var s=e.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this),this.addEvent(c.EventType.PROP_CHANGE,this.onEventPropChange,this,c)},s.onEnable=function(){t.prototype.onEnable.call(this),this.onEventPropChange()},s.onClick=function(){if(this.scene.isLoadComplete)if(c.hasToDayMax(this.prop.id))u.tip(h.get(40003));else{var t="道具";switch(this.prop.id){case 2:t="消除";break;case 3:t="反向";break;case 4:t="刷新";break;case 7:t="加时"}if(this.curCount>0){if(c.useProp(this.prop.id),l.type==d.tt)window.tt.reportAnalytics("clickItem",{item:t,ad:"false"})}else{var e=this.prop.id;if(this.isOpenUI)return void c.openGetUI(this.prop);f.showVideo("",(function(){(u.tip(h.get(40001)),c.addProp(e),l.type==d.tt)&&window.tt.reportAnalytics("adFinished",{origin:"道具 "+t})}),!1,(function(){c.addPropBuyShare(e)}))}}},s.onEventPropChange=function(){var t=this.curCount;t>0?(this.Label.string=""+t,this.SwitchChildrenCC.index=0,this.isOpenUI?this.ButtonCC.isPlayBreathe=!0:this.ButtonCC.isPlayBreathe=!1):(this.SwitchChildrenCC.index=1,this.isOpenUI?this.ButtonCC.isPlayBreathe=!1:this.ButtonCC.isPlayBreathe=!0)},r(e,[{key:"prop",get:function(){return c.singles.get(this.configID)}},{key:"scene",get:function(){return y.getCurrent()}},{key:"isOpenUI",get:function(){return!1}},{key:"curCount",get:function(){return this.prop.cur+g.propCount[this.configID]}}]),e}(C)).prototype,"configID",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.tip}}),v=B))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/scene",["./EntityMgr.ts","./Scene.ts","./CubeEntity.ts","./CustomCube1x1Entity.ts","./CustomDownEntity.ts","./Entity.ts","./CustomEditorSuccessUI.ts","./CustomEditorUI.ts","./CustomFriendUI.ts","./CustomMapUI.ts","./CustomMapUIItem.ts","./FailUI.ts","./LevelSelectUI.ts","./LevelSelectUIItem.ts","./LevelSelectUIItems.ts","./PropGetUI.ts","./ResetCardAnimUI.ts","./RunUI.ts","./RunUIItem.ts","./SuccessToDayUI.ts","./SuccessUI.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Scene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./EntityMgr.ts","./LogicDefine.ts","./GameTypeDefine.ts","./GameDefine.ts"],(function(t){var e,n,i,a,o,s,r,c,u,l,h,d,f,y,v,m,p,C,g,w,E,I,S,b,M,U,x,R,_,D,N,k,T,A;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,i=t.assertThisInitialized},function(t){a=t.cclegacy,o=t.Vec2,s=t.geometry,r=t.Vec3,c=t.Texture2D},function(t){u=t.Vector3,l=t.ccclass,h=t.CameraOrbitControlCC,d=t._logic,f=t._ui,y=t.NodeHelper,v=t.EUIState,m=t._timer,p=t._gameType,C=t._login,g=t.Sets,w=t._guide,E=t.EventHandlerCC,I=t._logicCustom,S=t.EEntityState,b=t._config_,M=t._resouces,U=t.BaseScene},function(t){x=t.EntityMgr},function(t){R=t.EBattleDirType,_=t.CSceneData,D=t.EEntityType,N=t.CBattleSizeTypeImgNames,k=t.CCubeColliderDis},function(t){T=t.EGameType},function(t){A=t.initData}],execute:function(){var P,F;a._RF.push({},"bea3awAp/FIgrr/BnoRJI8Z","Scene",void 0);var L=new o,O=new s.Ray,B=(new u,new r,new r,new r,new r,new r,{mode:s.ERaycastMode.CLOSEST,doubleSided:!0,distance:300});(P={})[R.back]=new s.Plane,P[R.down]=new s.Plane,P[R.front]=new s.Plane,P[R.left]=new s.Plane,P[R.right]=new s.Plane,P[R.up]=new s.Plane,t("Scene",l("Scene")(F=function(t){function a(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).entityMgr=new x(i(e)),e.cContent=null,e.cCamera_scene=null,e.cASceneOffset=null,e.orbitControls=null,e.startEntity=null,e.isRotate=!0,e.isIndexShow=!0,e.isLoadComplete=!1,e.rotateNum=0,e.isNewUserUI=!1,e.isNewUserUI2=!1,e}e(a,t);var o=a.prototype;return o.onCreate=function(){var t=this;this.orbitControls=this.cCamera_scene.getComponent(h),this.addEvent(d.EventType.CHANGE_SKIN_COMPLETE,this.updateSkin,this,d),this.addEvent(f.EventType.OPEN,(function(e){e==A.uiUrl.index&&(t.isIndexShow=!0,t.isRotate=!0,t.rotateNum=0,y.setRotateY(t.cContent,t.rotateNum,!1)),e!==_.uiUrl.RunUI&&"guide/prefab/GuideFingerUI"!==e&&t.closeNewUserFinger()}),this,f),this.addEvent(f.EventType.CLOSE,(function(e){e==A.uiUrl.index&&(t.isIndexShow=!1)}),this,f),this.isIndexShow=f.getModule(A.uiUrl.index).state==v.Open},o.onUpdate=function(){this.entityMgr.updateStateMachine(),this.isIndexShow&&this.isRotate&&(this.rotateNum+=10*m.dtDefault,y.setRotateY(this.cContent,this.rotateNum,!1))},o.create=function(t){var e=this;void 0===t&&(t=!0),p.type==T.index&&(t=!1),this._createInit();for(var n=[],i=0;i<d.data.datas.length;i++)d.data.datas[i]&&n.push(i);C.isNewUser||g.shuffle(n);var a=100/(1250*d.data.datas.length),o=.01;t||(a=0,o=0),p.type==T.today?1==d._today.configIndex&&(a*=.2,o=.002):p.type==T.shape&&(a*=3,o=.002);var s=this.getInterval(n.length,o)+.05;console.log("分帧加载时间",s),this.scheduleOnce((function(){e.isLoadComplete=!0,e.isNewUserUI2||C.isNewUser&&(w.finger({position:function(){return e.entityMgr.entitesType.get(D.Cube).get(1).getUIPosition(L),L},touchStartCloseUI:!1,delay:.7}),e.isNewUserUI2=!0,e.isNewUserUI=!0),e.isIndexShow||e.checkAllRemove()}),s);for(var r=function(i){var s=n[i],r=d.data.datas[s],c=e.getInterval(i,o);e.scheduleOnce((function(){r.entity=e.entityMgr.createCube(s,t,i*a)}),c)},c=0;c<n.length;c++)r(c)},o.closeNewUserFinger=function(){this.isNewUserUI&&(this.isNewUserUI=!1,w.closeFinger())},o.getInterval=function(t,e){return Math.floor(t/1)*e},o.preCube=function(t,e,n){for(var i=this,a=e-this.entityMgr.pool.pool(t).size(),o=0;o<a;o++)this.scheduleOnce((function(){i.entityMgr.createPreCube(t)}),(o+1)*n)},o.updateSkin=function(){var t=this;this.entityMgr.entitesType.get(D.Cube).forEach((function(e){t.updateCubeSkin(e.data,e.meshRenders)}))},o.touchStart=function(t){this.hasCreate()&&(this.startEntity=this.touchData(t,O,d.data.datas),this.isRotate=!1)},o.touchMove=function(t){this.orbitControls.onMouseMove(t),this.closeNewUserFinger()},o.mouseWheel=function(t){this.orbitControls.onMouseWheel(t)},o.touchData=function(t,e,n){return t.getLocation(L),this.cCamera_scene.screenPointToRay(L.x,L.y,e),this.rayByData(e,n)},o.touchEnd=function(t){if(this.hasCreate()){this.isIndexShow&&this.scheduleOnceCover(this.onDelayRotate,.8);var e=this.touchData(t,O,d.data.datas),n=this.startEntity;if(this.startEntity=null,!e)return;if(E.touchIsMoveRun){if(n!=e)return;if(d.getFront(e.entity.index))return;e.entity.click(!0)}else e.entity.click();this.closeNewUserFinger(),this.isIndexShow||this.checkAllRemove()}else if(p.type==T.customEditor&&!E.touchIsMoveRun){var i=this.touchData(t,O,I.data.all);i&&(i.customDownEntity?i.customDownEntity.click(O):i.customCube1x1Entity&&i.customCube1x1Entity.click(O))}},o.onDelayRotate=function(){this.isRotate=!0},o.checkAllRemove=function(){if(!(d.data.count()<=1)&&this._checkAllRemove()){for(var t,e=[],i=-1,a=n(d.data.datas);!(t=a()).done;){var o=t.value;i++,o&&o.entity&&o.entity.entityStateMackine.state==S.Run&&e.push(i)}g.shuffle(e);for(var s=-1;void 0!==e[++s]&&(d.dirBack(e[s]),this._checkAllRemove()););}},o._checkAllRemove=function(){for(var t=0;t<d.data.datas.length;t++){var e=d.data.datas[t];if(e&&e.entity&&!d.getFront(t))return!1}return!0},o.hasCreate=function(){return p.type==T.index||p.type==T.level||p.type==T.shape||p.type==T.today||p.type==T.custom},o.rayByData=function(t,e,i){var a=null;if(!this.isLoadComplete)return a;for(var o,r=500,c=-1,l=n(e);!(o=l()).done;){var h=o.value;if(c++,(null==i||c!=i)&&h){if(this.hasCreate()){if(!h.entity)continue}else if(!h.customDownEntity&&!h.customCube1x1Entity)continue;p.type==T.index&&u.set(h.aabb.center,h.entity.node.worldPosition);var d=s.intersect.rayAABB(t,h.aabb);d>0&&d<r&&(r=d,a=h)}}return a},o.rayMeshs=function(t,e){for(var i,a=300,o=-1,s=-1,r=n(e);!(i=r()).done;){var c=i.value;s++;var u=this.rayMesh(t,c);u&&u<a&&(a=u,o=s)}return o},o.rayMesh=function(t,e){return s.intersect.rayModel(t,e.model,B)},o.colliderAnim=function(t){var e=d.data.datas[t],n=[];d.getFronts(e,e,n,0);for(var i=k,a=0,o=n;a<o.length;a++){var s=o[a];s.entity.colliderAnim(e.entity,1*Math.pow(.8,s.frontIndex),i*Math.pow(.9,s.frontIndex))}},o.custom=function(){this._createInit(),this.isLoadComplete=!0;for(var t=0;t<I.data.downs.length;t++)I.data.downs[t].customDownEntity=this.entityMgr.createCustomDown(t);for(var e,i=-1,a=n(I.data.datas);!(e=a()).done;){i++,e.value.customCube1x1Entity=this.entityMgr.createCustomCube1x1(i)}},o._createInit=function(){this.isLoadComplete=!1,this.unscheduleAllCallbacks(),m.clearAll(this),y.setRotateY(this.cContent,0,!1),this.entityMgr.clear(!1),this.initCamera()},o.initCamera=function(){y.setRotate(this.cCamera_scene.node,d.cameraRotate,!1),y.setPosition(this.cCamera_scene.node,d.cameraPosition,!1),this.orbitControls.minDistance=d.cameraDis.x,this.orbitControls.maxDistance=d.cameraDis.y;var t=0;p.type==T.customEditor&&(t=-2),this.orbitControls.target.set(0,t,0),this.orbitControls.reset()},o.updateCubeSkin=function(t,e){if(p.type!=T.shape)for(var i,a=d.arrowSkin.cur,o=b.obj.skin_item[a].scene_url,s=-1,r=n(e);!(i=r()).done;){var u=i.value;s++;var l=N[t.type][s],h=d.converSkinUrl(o,l),f=M.get(h,c);u.sharedMaterial.setProperty("mainTexture",f)}},a}(U))||F);a._RF.pop()}}}));

System.register("chunks:///_virtual/SuccessToDayUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./LogicDefine.ts"],(function(e){var t,o,n,i,c,a,s,r,u,l,p,y,h,_,d,f,m,S,T,k;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){n=e.cclegacy},function(e){i=e.ccclass,c=e._platform,a=e.EBottomAdType,s=e.EPlatformType,r=e._audio,u=e.Times,l=e._logic,p=e.Sets,y=e._config_,h=e._gameType,_=e._main,d=e._ui,f=e._language,m=e.EUILayer,S=e.EBlockOnceAdType,T=e.BaseUI},function(e){k=e.CSceneData}],execute:function(){var v;n._RF.push({},"d1ccbP7F3BI+KMS109dZOcI","SuccessToDayUI",void 0);e("SuccessToDayUI",i("SuccessToDayUI")(v=function(e){function n(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).layerType=m.Notice,t.blockOnceAdType=S.Show,t.cAShare=null,t.cASkin=null,t.cLabel_cur_time=null,t.cShare=null,t._openData=null,t.openByAudioUrls=[k.audio.success],t}t(n,e);var i=n.prototype;return i.onCreate=function(){switch(c.type){case s.vivo:this.bottomAdType=a.Native;break;case s.oppo:c.isLongScreen?this.bottomAdType=a.Banner:this.bottomAdType=a.None;break;case s.wx:this.bottomAdType=a.Native;break;default:this.bottomAdType=a.Banner}},i.onOpen=function(){c.type==s.oppo&&c._nativeTemp_.showRoot(),r.play(this.audioUrls[0]),c.type==s.overseas_kwai&&c._interstitial_.show(),this.cLabel_cur_time.string=u.numHourCountDown(1e3*this._openData);var e=l.arrowSkin.noUnlocks;if(e.length>0){this.cASkin.active=!0;var t=p.random(e);this.SpriteLoaderCC.setSpriteFrameUrl(y.obj.skin_item[t].icon_url,!0),l.arrowSkin.unlock(t)}else this.cASkin.active=!1},i.onClickIndex=function(){this.closeUI(),h.exit(),c.type==s.oppo&&c._nativeTemp_.hideRoot()},i.onClickAShare=function(){_.showVideo("好友自创通关分享",(function(){d.tip(f.get(40004))}),!0)},o(n,[{key:"toDayMaxRecode",get:function(){return this.getCacheComponent("ToDayMaxRecode")}}]),n}(T))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/SuccessUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./GameTypeDefine.ts","./LogicDefine.ts"],(function(e){var t,o,i,c,n,a,s,u,h,r,p,l,y,d,v,f,C,m;return{setters:[function(e){t=e.inheritsLoose,o=e.createClass},function(e){i=e.cclegacy},function(e){c=e.ccclass,n=e._platform,a=e.EBottomAdType,s=e.EPlatformType,u=e._language,h=e.ELanguageType,r=e._audio,p=e._gameType,l=e._main,y=e._ui,d=e.EUILayer,v=e.EBlockOnceAdType,f=e.BaseUI},function(e){C=e.EGameType},function(e){m=e.CSceneData}],execute:function(){var x;i._RF.push({},"c18eaCCyVFJF7yXumQEuZxx","SuccessUI",void 0);e("SuccessUI",c("SuccessUI")(x=function(e){function i(){for(var t,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))||this).layerType=d.Notice,t.blockOnceAdType=v.Show,t.cAShare=null,t.cButtonCCNext=null,t.cBtns=null,t.cNativeHight=null,t.cshipin=null,t.openByAudioUrls=[m.audio.success],t}t(i,e);var c=i.prototype;return c.onCreate=function(){switch(n.type){case s.vivo:this.bottomAdType=a.Native;break;case s.oppo:n.isLongScreen?this.bottomAdType=a.Banner:this.bottomAdType=a.None;break;case s.wx:this.bottomAdType=a.Native;break;default:this.bottomAdType=a.Banner}},c.onOpen=function(){switch(n.type==s.oppo?n._nativeTemp_.showRoot():u.cur==h.chinese?(this.cAShare&&(this.cAShare.active=!0),this.cButtonCCNext.isPlayBreathe=!1):(this.cAShare&&(this.cAShare.active=!1),this.cButtonCCNext.isPlayBreathe=!0),r.play(this.audioUrls[0]),this.cshipin.active=!1,p.type){case C.level:this.cButtonCCNext.node.active=!0,this.toDayMaxRecode.node.active=!1;break;case C.today:this.cButtonCCNext.node.active=!1,this.toDayMaxRecode.node.active=!0;break;case C.shape:this.cshipin.active=!0}n.type==s.overseas_kwai&&n._interstitial_.show()},c.onClickIndex=function(){this.closeUI(),p.exit(),n.type==s.oppo&&n._nativeTemp_.hideRoot()},c.onClickNext=function(){p.hasRun()&&(this.closeUI(),p.next())},c.onClickAShare=function(){l.showVideo("好友自创通关分享",(function(){y.tip(u.get(40004))}),!0)},o(i,[{key:"toDayMaxRecode",get:function(){return this.getCacheComponent("ToDayMaxRecode")}}]),i}(f))||x);i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/scene', 'chunks:///_virtual/scene'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});